# 3차원 뷰잉

3차원 장면을 사진을 찍듯이 2차원 평면으로 옮기는 과정

- 깊이 단서 기법(depth cueing) : 깊이를 감지하는 데 도움이 되는 정보를 제공함으로써 깊이 정보를 표현하는 기법
- 뷰 평면 법선 벡터 : 뷰 평면의 방향을 나타내는 뷰 평면에 수직인 벡터
- 뷰 평면(view plane) : 장면이 투영되는 평면
- 뷰업 벡터 : 뷰잉 좌표계의 +y축 방향을 결정하는 벡터
- 뷰 지점 : 관찰자의 눈의 위치를 나타내는 좌표
- 뷰 체적 : 3차원 뷰잉을 위한 클리핑 영역
- 평행투영 : 평행한 투영선을 따라 뷰 평면에 투영을 하는 방법
- 직교투영 : 뷰 평면과 수직인 투영선을 따라 투영을 하는 평행투영
- 경사평행투영 : 투영 경로가 두영 평면과 수직이 아닌 평행투영
- 축각 직교투영 : 뷰 평면이 여러 축과 교차하는 직교투영
- 등각 투영 : 뷰 평면이 원점으로부터 동일한 거리에서 세 좌표축과 교차하는 평행투영
- 캐버리어 투영 : 경사평행투영의 한 종류로 뷰 평면에 수직인 선분의 길이가 동일한 길이로 투영된다.
- 캐비닛 투영 : 경사평행투영의 한 종류로 뷰 평면에 수직인 선분을 투영한 길이는 원래 길이의 반이다.

## 3차원 뷰잉의 개요

### 1. 3차원 정보의 2차원 표현

- 2차원 디스플레이 평면에 옮기기 위한 투영: 평행 투형, 원근 투형
- 3차원 좌표계의 정보를 2차원 좌표 평면에 표현할 때 잃게 되는 깊이 정보를 표현하기 위한 방법을 활용할 수 있음
- 깊이 단서 기법(depth cueing): 깊이를 감지하는 데 도움이 되는 정보를 제공
    - 깊이에 따른 물체의 스케일
    - 안개(fog) 효과

#### 3차원 뷰잉

- 관찰자의 시점을 고려한 장면의 표현
- 3차원 세계좌표에 정의된 장면을 관찰자 시점의 좌표계로 변환
- 관찰자 시점에서 본 장 면의 입체를 2차원 뷰 평면에 투영

### 2. 3차원 뷰잉 파이프라인

- 모델링 좌표 -> 모델링 변환 
- 세계 좌표 -> 뷰잉 변환 -
- 뷰잉 좌표 -> 투영 변환 
- 투영 좌표 -> 정규화 및 클리핑
- 정규 좌표 -> 뷰포트 변환
- 장치 좌표

## 3차원 뷰잉 좌표 파라미터

### 1. 3차원 뷰잉 좌표계

!! 오른손 좌표계 기준으로 생각하자

외적을 이용하여 u, v, n 벡터를 구함. 따라서 view-up벡터가 꼭 z_view와 수직일 필요는 없음

정규화 연산

## 평행투영

- 좌표점을 평행한 투영선에 따라 뷰 평면에 투영
- 위치와 관계없이 물체 크기의 비율이 그대로 유지됨
- 평행한 선은 투영 후에도 평행함
- 직교투영과 경사평행투영으로 구분

### 2. 직교투영

- 정면도, 평면도, 측면도
- 축각 직교투영: 뷰 평면이 여러 축과 교차하도록 여러 방향을 동시에 볼 수 있게 하는 투영 방식
- 등각투영: 측각 직교투영의 한 유형, 뷰 평면이 세 축과 원점으로부터 동일한 거리에서 교차

#### 뷰 체적

z_near, z_far 사이의 체적

정규화 시에는 왼손 좌표계를 이용(z * -1)

직육면체

### 3. 경사평행투영

- 투영 경로가 뷰 평면과 수직이 아닌 평행투영
- 정면, 측면, 평면도를 하나의 화면에 함께 표시할 수 있음
- 투영 경로의 방향을 지정하여 투영을 설정
- 평행육면체 뷰 체적
- 밀림변환 형태


#### 경사평행투영의 종류

- 캐버리어(cavalier)투영: tan a = 1인 경우 가로 세로 길이 동일
- 캐비닛(cabinet)투영: tan a = 2인 경우, 가로길이 = 세로 길이 * 2

### 4. 원근투영의 개요

- 투영 기준점으로 수렴하는 경로를 따라 뷰 평면에 물체를 투영하는 방법
- 물체는 원근법에 의해 표시됨

#### 소실점

- 뷰 평면과 평행한 평행 선분들은 투영 결과도 평행함
- 뷰 평면과 평행하지 않은 선분들의 투영 결과는 평행하지 않으며, 이들의 연장선은 소실점으로 모임

1점 투영: 하나의 소실점

2점 투영: 2개의 소실점

3점 투영: 3개의 소실점

### 원근 투영의 파라미터 설정

뷰잉 좌표계에서 x,y,z축의 클리핑 범위 지정

종횡비 r_asp = width/height

원근투영은 아핀변환이 아님: 평행한 선이 변환 후에도 평행함을 보장하지 않음

왼손좌표계는 위쪽이 z

### 5. 원근투영 변환의 개념

### 6. 원근투영 및 정규화 변환식

### 7. 3차원 클리핑

#### 3차원 영역코드

원근상하우좌 6개의 코드 사용

곡선 및 곡면의 경우 작은 선분 및 작은 다각형으로 근사화하여 처리